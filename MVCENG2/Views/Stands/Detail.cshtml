@model MVCENG2.Services.PaginatedList<MVCENG2.Models.Statistic>

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<div class="table-responsive">
    @*<table class="table table-striped table-sm">*@

    <table class="table table-centered table-nowrap table-hover mb-0">
        <thead>
            <tr>

                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["ProdNumSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">ProductionNumber</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["VINSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">VIN</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["TestStartSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">TestStart</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["TestEndSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">TestEnd</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["TotalDurationSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">TotalDuration</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["ResultSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Result</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["NotOksSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">NotOks</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["ClientSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">Client</a></td>
                <td><a asp-action="Detail" asp-route-sortOrder="@ViewData["TestTypeSortParm"]" asp-route-currentFilter="@ViewData["CurrentFilter"]">TestType</a></td>
            </tr>
        </thead>
        <tbody>
            @{
                string page_name = Url.Action().Split("/").Last();
                  @if (page_name.Contains("_"))
                    @foreach (var stat in Model.Where(p => p.Client == page_name))
                    {
                        if (stat.Result=="Ok")
                        {
                            <tr onClick="document.location='/Siemens/TestReport/@stat.VIN'" style="background-color:rgba(0,255,20,0.35)">
                                <td>@stat.ProductionNumber</td>
                                <td>@stat.VIN</td>
                                <td>@stat.TestStart</td>
                                <td>@stat.TestEnd</td>
                                <td>@stat.TotalDuration</td>
                                <td>@stat.Result</td>
                                <td>@stat.NotOks</td>
                                <td>@stat.Client</td>
                                <td>@stat.TestType</td>
                            </tr>
                        }
                        else
                        {
                                    <tr onClick="document.location='/Siemens/TestReport/@stat.VIN'" style="background-color:rgba(255,0,0,0.35)">
                                        <td>@stat.ProductionNumber</td>
                                        <td>@stat.VIN</td>
                                        <td>@stat.TestStart</td>
                                        <td>@stat.TestEnd</td>
                                        <td>@stat.TotalDuration</td>
                                        <td>@stat.Result</td>
                                        <td>@stat.NotOks</td>
                                        <td>@stat.Client</td>
                                        <td>@stat.TestType</td>
                                    </tr>
                        }
                    }
                            
                else
                    @foreach (var stat in Model.Where(p => p.TestType == page_name))
                    {
                        if (stat.Result == "Ok")
                        {
                                    <tr onClick="document.location='/Siemens/TestReport/@stat.VIN'" style="background-color:rgba(0,255,20,0.35)">
                                        <td>@stat.ProductionNumber</td>
                                        <td>@stat.VIN</td>
                                        <td>@stat.TestStart</td>
                                        <td>@stat.TestEnd</td>
                                        <td>@stat.TotalDuration</td>
                                        <td>@stat.Result</td>
                                        <td>@stat.NotOks</td>
                                        <td>@stat.Client</td>
                                        <td>@stat.TestType</td>
                                    </tr>
                        }
                        else
                        {
                                    <tr onClick="document.location='/Siemens/TestReport/@stat.VIN'" style="background-color:rgba(255,0,0,0.35)">
                                        <td>@stat.ProductionNumber</td>
                                        <td>@stat.VIN</td>
                                        <td>@stat.TestStart</td>
                                        <td>@stat.TestEnd</td>
                                        <td>@stat.TotalDuration</td>
                                        <td>@stat.Result</td>
                                        <td>@stat.NotOks</td>
                                        <td>@stat.Client</td>
                                        <td>@stat.TestType</td>
                                    </tr>
                        }
                    }

            }

            
                 
        </tbody>
    </table>

    @{
        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
    }

    <a asp-action="Detail"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex - 1)"
       asp-route-currentFilter="@ViewData["CurrentFilter"]"
       class="btn btn-default @prevDisabled">
        Previous
    </a>
    <a asp-action="Detail"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex + 1)"
       asp-route-currentFilter="@ViewData["CurrentFilter"]"
       class="btn btn-default @nextDisabled">
        Next
    </a>

</div>