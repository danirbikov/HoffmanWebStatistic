@model HoffmanWebstatistic.Services.PaginatedList<Statistic>

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    string statisticElementColor;
    string controllerName = @ViewContext.RouteData.Values["controller"].ToString();

}


<div class="table-responsive">
    @*<table class="table table-striped table-sm">*@

    <table class="table table-centered table-nowrap table-hover mb-0">
        <thead>
            <tr>
                @{   
                    foreach (string columnName in ViewBag.ColumnNames)
                    {
                        <td><a asp-controller=@controllerName asp-action="Detail" asp-route-standsIdentidier=@ViewData["StandsIdentifier"] asp-route-sortOrder=@ViewData[columnName+"SortParam"] asp-route-currentFilter=@ViewData["CurrentFilter"]>@columnName</a></td>
                    }
                }
            </tr>
        </thead>
        <tbody>
            @{
        
                @foreach (var statisticObject in Model)
                {
                    if (statisticObject.Result == "Ok")
                    {
                        statisticElementColor = "background - color:rgba(0, 255, 20, 0.35)";
                    }
                    else
                    {
                        statisticElementColor = "background-color:rgba(255,0,20,0.52)";
                    }

                    <tr onClick="document.location='@Url.Action("TestReport", @controllerName, new {}, null)'" style=@statisticElementColor>
                            @switch (controllerName)
                            {
                                case ("Siemens"):
                                    <td>@statisticObject.ProductionNumber</td>
                                    <td>@statisticObject.VIN</td>
                                    <td>@statisticObject.TestStart</td>
                                    <td>@statisticObject.TestEnd</td>
                                    <td>@statisticObject.TotalDuration</td>
                                    <td>@statisticObject.Result</td>
                                    <td>@statisticObject.NotOks</td>
                                    <td>@statisticObject.Client</td>
                                    <td>@statisticObject.TestType</td>
                                break;

                                case ("Hoffman"):
                                    <td>@statisticObject.VIN</td>
                                break;
                            }
                        </tr>      
                }
            }     
        </tbody>
    </table>

    @{
        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
    }

    <a asp-controller=@controllerName
       asp-action="Detail"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex - 1)"
       asp-route-standsIdentidier=@ViewData["StandsIdentifier"]
       class="btn btn-default @prevDisabled">
        Previous
    </a>
    <a asp-controller=@controllerName
       asp-action="Detail"
       asp-route-sortOrder="@ViewData["CurrentSort"]"
       asp-route-pageNumber="@(Model.PageIndex + 1)"
       asp-route-standsIdentidier=@ViewData["StandsIdentifier"]
       class="btn btn-default @nextDisabled">
        Next
    </a>

</div>