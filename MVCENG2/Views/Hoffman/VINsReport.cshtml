@model ReportViewModel

@{
    string controllerName = @ViewContext.RouteData.Values["controller"].ToString();
    string pageNumberString="";
}

<div class="container-fluid px-4">
    <h1 class="mt-4 mb-4">@ViewData["StandsIdentifier"]</h1>

    <div class="card mb-4">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-centered table-nowrap table-hover mb-0">
                    <thead>
                        <tr>
                            @{

                                <td><a asp-controller=@controllerName asp-action="VINsReport" asp-route-searchIdentifier=@ViewData["SearchIdentifier"] asp-route-standsIdentifier=@ViewData["StandsIdentifier"]  asp-route-sortOrder=@Model.SortViewModel.VINSort>VIN</a></td>
                                <td><a asp-controller=@controllerName asp-action="VINsReport" asp-route-searchIdentifier=@ViewData["SearchIdentifier"] asp-route-standsIdentifier=@ViewData["StandsIdentifier"]  asp-route-sortOrder=@Model.SortViewModel.OrderNumberSort>Order number</a></td>
                                <td><a asp-controller=@controllerName asp-action="VINsReport" asp-route-searchIdentifier=@ViewData["SearchIdentifier"] asp-route-standsIdentifier=@ViewData["StandsIdentifier"]  asp-route-sortOrder=@Model.SortViewModel.StandNameSort>Имя стенда последнего теста</a></td>
                                <td><a asp-controller=@controllerName asp-action="VINsReport" asp-route-searchIdentifier=@ViewData["SearchIdentifier"] asp-route-standsIdentifier=@ViewData["StandsIdentifier"] asp-route-sortOrder=@Model.SortViewModel.DateSort>Дата последнего теста</a></td>
                            }
                        </tr>
                    </thead>
                    <tbody>

                        @{
        
                            @foreach (var jsonHeaderObject in Model.resultsJsonHeader)
                            {

                                <tr onClick="document.location='@Url.Action("JSONReport", @controllerName, new {VIN = @jsonHeaderObject.VIN, standsIdentifier = ViewData["StandsIdentifier"] , searchIdentifier = @ViewData["SearchIdentifier"]}, null)'">
                                    <td>@jsonHeaderObject.VIN</td>
                                    <td>@jsonHeaderObject.Ordernum</td>
                                    <td>@jsonHeaderObject.Stand.StandName</td>
                                    @if (jsonHeaderObject.Created != null)
                                    {
                                        <td>@jsonHeaderObject.Created</td>
                                    }
                                    else
                                    {
                                        <td>Date not recognized</td>
                                    }                       
                                </tr>
                            }
                        }     
                    </tbody>
                </table>

                <nav aria-label="...">
                    <ul class="pagination">
                                               
                        @foreach (int pageNumber in Model.PageViewModel.PagesList)
                        {
                            pageNumberString = pageNumber.ToString();
                            if (pageNumber == 1)
                                pageNumberString = "«" + pageNumberString;
                            if (pageNumber == Model.PageViewModel.TotalPages)
                                pageNumberString = pageNumberString + "»";
                            if (pageNumber == Model.PageViewModel.PageNumber)
                                {
                                    <li class="page-item active">
                                        <a class="page-link" asp-action="VINsReport"
                                           asp-route-standsIdentifier=@ViewData["StandsIdentifier"]
                                           asp-route-searchIdentifier=@ViewData["SearchIdentifier"]
                                           asp-route-pageNumber=@pageNumber
                                           asp-route-sortorder="@(Model.SortViewModel.Current)">
                                            <font style="color:white">
                                                @pageNumberString
                                            </font>
                                        </a>
                                    </li>
                                }
                                else
                                {
                                    <li class="page-item">
                                        <a class="page-link" asp-action="VINsReport"
                                        asp-route-standsIdentifier=@ViewData["StandsIdentifier"]
                                        asp-route-searchIdentifier=@ViewData["SearchIdentifier"]
                                        asp-route-pageNumber=@pageNumber
                                        asp-route-sortorder="@(Model.SortViewModel.Current)">
                                            @pageNumberString
                                        </a>
                                    </li>
                                }
                            
                        }
                        
                    </ul>
                </nav>                                   
            </div>
        </div>
    </div>
</div>



